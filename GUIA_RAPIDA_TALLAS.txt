╔══════════════════════════════════════════════════════════════════╗
║                                                                  ║
║          GUÍA RÁPIDA: SISTEMA DE TALLAS PARA PRODUCTOS          ║
║                                                                  ║
║                    Tennis y Zapatos E-commerce                   ║
║                                                                  ║
╚══════════════════════════════════════════════════════════════════╝


═══════════════════════════════════════════════════════════════════
  📋 TABLA DE CONTENIDOS
═══════════════════════════════════════════════════════════════════

1. ¿Qué es el Sistema de Tallas?
2. Cómo funciona para el cliente
3. Configuración de productos con tallas
4. Gestión de stock por talla
5. Visualización en reportes
6. Preguntas frecuentes


═══════════════════════════════════════════════════════════════════
  ❓ 1. ¿QUÉ ES EL SISTEMA DE TALLAS?
═══════════════════════════════════════════════════════════════════

El Sistema de Tallas permite:

✓ Que los clientes seleccionen la talla ANTES de agregar al carrito
✓ Gestionar stock individual por cada talla de cada producto
✓ Tener el mismo producto en diferentes tallas en el carrito
✓ Control preciso de inventario por talla

Tipos de tallas disponibles:
- Numéricas: 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45
- Alfabéticas: XS, S, M, L, XL, XXL


═══════════════════════════════════════════════════════════════════
  👤 2. CÓMO FUNCIONA PARA EL CLIENTE
═══════════════════════════════════════════════════════════════════

Paso 1: El cliente entra a un producto
        ↓
Paso 2: Ve el selector de tallas con disponibilidad
        ↓
        [38]  [39]  [40-Agotado]  [41-2 disponibles]
        ↓
Paso 3: Hace clic en la talla deseada (ej: 39)
        ↓
        [38]  [39-SELECCIONADA]  [40]  [41]
        ↓
Paso 4: Selecciona cantidad (máximo = stock de esa talla)
        ↓
Paso 5: Click en "Agregar al Carrito"
        ↓
        ✓ Producto agregado con talla 39

IMPORTANTE: Si el producto requiere talla y el cliente NO la 
selecciona, verá un mensaje de error:
"Por favor, selecciona una talla antes de agregar al carrito"


═══════════════════════════════════════════════════════════════════
  ⚙️ 3. CONFIGURACIÓN DE PRODUCTOS CON TALLAS
═══════════════════════════════════════════════════════════════════

Desde el Panel Administrativo:

┌─────────────────────────────────────────────────────────────────┐
│ A. ACTIVAR TALLAS EN UN PRODUCTO                                │
└─────────────────────────────────────────────────────────────────┘

1. Ir a: Admin → Productos → Editar Producto

2. Buscar campo: "¿Requiere Talla?"
   [✓] Sí, este producto requiere talla
   [ ] No

3. Guardar producto


┌─────────────────────────────────────────────────────────────────┐
│ B. AGREGAR TALLAS Y STOCK A UN PRODUCTO                         │
└─────────────────────────────────────────────────────────────────┘

Opción 1: INTERFAZ ADMINISTRATIVA (Recomendado)

1. Ir a: Admin → Productos → Ver Producto → "Gestionar Tallas"

2. Seleccionar tallas disponibles:
   ┌───────────────────────────────────────────────────┐
   │  Tallas Disponibles                               │
   │                                                   │
   │  [ ] 35   [ ] 36   [✓] 37   [✓] 38   [✓] 39      │
   │  [✓] 40   [✓] 41   [ ] 42   [ ] 43   [ ] 44      │
   │                                                   │
   │  Stock por talla:                                 │
   │  - Talla 37: [10] unidades  Stock mín: [3]       │
   │  - Talla 38: [15] unidades  Stock mín: [3]       │
   │  - Talla 39: [20] unidades  Stock mín: [5]       │
   │  - Talla 40: [12] unidades  Stock mín: [3]       │
   │  - Talla 41: [8]  unidades  Stock mín: [2]       │
   │                                                   │
   │  [Guardar Tallas]                                 │
   └───────────────────────────────────────────────────┘

3. Click en "Guardar Tallas"


Opción 2: SQL DIRECTO (Avanzado)

Insertar tallas manualmente:

```sql
-- Producto ID = 123, agregar talla 38 con stock 15
INSERT INTO producto_tallas 
(producto_id, talla_id, stock, stock_minimo, estado) 
VALUES 
(123, 5, 15, 3, 'activo');

-- Nota: Consultar ID de talla en tabla 'tallas'
SELECT id, nombre FROM tallas ORDER BY orden;
```


═══════════════════════════════════════════════════════════════════
  📊 4. GESTIÓN DE STOCK POR TALLA
═══════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────┐
│ A. VER STOCK ACTUAL                                              │
└─────────────────────────────────────────────────────────────────┘

Desde: Admin → Inventario → Stock por Tallas

Ejemplo de vista:

┌───────────────────────────────────────────────────────────────┐
│ Producto: Zapatilla Nike Air Max                             │
├──────────┬──────────┬────────────┬────────────┬──────────────┤
│  Talla   │  Stock   │  Stock Mín │   Estado   │   Acciones   │
├──────────┼──────────┼────────────┼────────────┼──────────────┤
│   37     │    5     │     3      │ ⚠️ Bajo    │ [Editar]     │
│   38     │   15     │     3      │ ✓ Normal   │ [Editar]     │
│   39     │   20     │     5      │ ✓ Normal   │ [Editar]     │
│   40     │    0     │     3      │ ❌ Agotado │ [Editar]     │
│   41     │    8     │     2      │ ✓ Normal   │ [Editar]     │
└──────────┴──────────┴────────────┴────────────┴──────────────┘


┌─────────────────────────────────────────────────────────────────┐
│ B. ACTUALIZAR STOCK DE UNA TALLA                                │
└─────────────────────────────────────────────────────────────────┘

1. Click en [Editar] de la talla a modificar

2. Ingresar nuevo stock:
   ┌──────────────────────────────────┐
   │ Talla: 40                        │
   │ Stock Actual: 0                  │
   │ Nuevo Stock: [25]                │
   │ Stock Mínimo: [3]                │
   │                                  │
   │ [Guardar] [Cancelar]             │
   └──────────────────────────────────┘

3. Click en "Guardar"


┌─────────────────────────────────────────────────────────────────┐
│ C. ALERTAS DE STOCK BAJO                                         │
└─────────────────────────────────────────────────────────────────┘

El sistema enviará alertas automáticas cuando:

• Stock de talla < Stock mínimo configurado
• Stock de talla = 0 (Agotado)

Ejemplo de alerta:
┌────────────────────────────────────────────────────────────┐
│ ⚠️ ALERTA DE STOCK                                         │
│                                                            │
│ Producto: Zapatilla Nike Air Max                          │
│ Talla: 37                                                  │
│ Stock actual: 2 unidades                                   │
│ Stock mínimo: 3 unidades                                   │
│                                                            │
│ [Reabastecer Ahora] [Recordar Después]                    │
└────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════
  📈 5. VISUALIZACIÓN EN REPORTES
═══════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────┐
│ A. REPORTE DE VENTAS POR TALLA                                  │
└─────────────────────────────────────────────────────────────────┘

Admin → Reportes → Productos → Seleccionar "Por Talla"

┌──────────────────────────────────────────────────────────────┐
│ Período: Último Mes                                          │
│                                                              │
│ Productos Más Vendidos por Talla                            │
├────────────────────────────┬───────┬──────────┬─────────────┤
│ Producto                   │ Talla │ Vendido  │ Ingresos    │
├────────────────────────────┼───────┼──────────┼─────────────┤
│ Nike Air Max               │  39   │   45 un. │ $2,250,000  │
│ Adidas Superstar           │  38   │   38 un. │ $1,900,000  │
│ Nike Air Max               │  40   │   35 un. │ $1,750,000  │
│ Puma Cali                  │  37   │   32 un. │ $1,280,000  │
│ Adidas Superstar           │  39   │   30 un. │ $1,500,000  │
└────────────────────────────┴───────┴──────────┴─────────────┘


┌─────────────────────────────────────────────────────────────────┐
│ B. REPORTE DE TALLAS MÁS POPULARES                              │
└─────────────────────────────────────────────────────────────────┘

Admin → Reportes → Estadísticas → "Tallas Más Vendidas"

    Tallas Más Vendidas (Últimos 3 Meses)
    
    📊 Gráfico de Barras:
    
    39 ████████████████████████████ 180 unidades
    38 ████████████████████████ 150 unidades
    40 ████████████████████ 120 unidades
    37 ██████████████ 90 unidades
    41 ████████████ 75 unidades
    36 ████████ 50 unidades
    42 ██████ 40 unidades
    
    Conclusión: Abastecer más stock de tallas 38-40


┌─────────────────────────────────────────────────────────────────┐
│ C. REPORTE DE INVENTARIO POR TALLA                              │
└─────────────────────────────────────────────────────────────────┘

Admin → Reportes → Inventario → "Stock por Tallas"

┌──────────────────────────────────────────────────────────────┐
│ Resumen de Inventario                                        │
│                                                              │
│ Total Productos con Tallas: 45                               │
│ Total Tallas Configuradas: 387                               │
│ Tallas con Stock Bajo: 23 ⚠️                                 │
│ Tallas Agotadas: 8 ❌                                        │
│                                                              │
├──────────────────────────────────────────────────────────────┤
│ Productos con Stock Crítico                                 │
├────────────────────────┬───────┬──────────┬────────────────┤
│ Producto               │ Talla │ Stock    │ Stock Mínimo   │
├────────────────────────┼───────┼──────────┼────────────────┤
│ Nike Air Max           │  37   │    2     │      3         │
│ Adidas Superstar       │  41   │    1     │      3         │
│ Puma Cali              │  36   │    0     │      2         │
└────────────────────────┴───────┴──────────┴────────────────┘


═══════════════════════════════════════════════════════════════════
  ❓ 6. PREGUNTAS FRECUENTES
═══════════════════════════════════════════════════════════════════

Q1: ¿Puedo tener productos CON y SIN tallas?
────────────────────────────────────────────────────────────────
A: Sí. Productos como "zapatillas" requieren talla, pero productos
   como "cordones" pueden no requerirla. Configúralo en el campo
   "¿Requiere Talla?" al editar el producto.


Q2: ¿Qué pasa si un cliente intenta comprar una talla agotada?
────────────────────────────────────────────────────────────────
A: El botón de esa talla aparecerá DESHABILITADO con un badge
   "Agotado". El cliente no podrá seleccionarla.


Q3: ¿Cómo agrego una talla nueva que no existe?
────────────────────────────────────────────────────────────────
A: Ir a Admin → Configuración → Tallas → "Agregar Nueva Talla"
   
   Ejemplo: Agregar talla "46"
   - Nombre: 46
   - Tipo: Numérica
   - Orden: 16
   - Estado: Activo


Q4: ¿Puedo eliminar una talla de un producto?
────────────────────────────────────────────────────────────────
A: Sí. En "Gestionar Tallas", desmarcar la talla y guardar.
   ADVERTENCIA: Si hay pedidos con esa talla, quedará registrado
   el historial, pero no se podrá volver a comprar.


Q5: ¿Cómo veo qué talla compró un cliente específico?
────────────────────────────────────────────────────────────────
A: Admin → Pedidos → Ver Detalle del Pedido

   ┌──────────────────────────────────────────────────────┐
   │ Pedido #12345                                        │
   │ Cliente: Juan Pérez                                  │
   ├─────────────────────┬────────┬──────────┬───────────┤
   │ Producto            │ Talla  │ Cantidad │ Precio    │
   ├─────────────────────┼────────┼──────────┼───────────┤
   │ Nike Air Max        │   39   │    1     │ $50,000   │
   │ Adidas Superstar    │   38   │    2     │ $100,000  │
   └─────────────────────┴────────┴──────────┴───────────┘


Q6: ¿El stock general del producto cambia con las tallas?
────────────────────────────────────────────────────────────────
A: No. El stock en la tabla 'productos' es independiente.
   El stock real se gestiona en 'producto_tallas'.
   
   Ejemplo:
   - productos.stock = 100 (valor general, no se usa)
   - producto_tallas:
     * Talla 38: 15 unidades
     * Talla 39: 20 unidades
     * Talla 40: 10 unidades
     * TOTAL REAL: 45 unidades


Q7: ¿Cómo importo stock masivo de tallas?
────────────────────────────────────────────────────────────────
A: Opción 1: Importar Excel
   Admin → Productos → Importar Stock → Seleccionar archivo CSV
   
   Formato del CSV:
   producto_id,talla_nombre,stock,stock_minimo
   123,38,15,3
   123,39,20,5
   124,S,30,5
   124,M,40,10
   
   Opción 2: SQL directo
   Ver archivo: database/migrations/importar_stock_tallas.sql


Q8: ¿Puedo configurar alertas automáticas por email?
────────────────────────────────────────────────────────────────
A: Sí. En Admin → Configuración → Notificaciones
   
   [✓] Enviar email cuando stock < stock_mínimo
   [✓] Enviar email cuando talla se agota
   
   Email destino: [admin@tennisyzapatos.com]


Q9: ¿Qué hago si el stock de todas las tallas es 0?
────────────────────────────────────────────────────────────────
A: El producto aparecerá como "AGOTADO" en la tienda.
   Opciones:
   1. Reabastecer tallas más populares
   2. Marcar producto como "Inactivo" temporalmente
   3. Eliminar producto si ya no se venderá


Q10: ¿Puedo ofrecer tallas bajo pedido?
────────────────────────────────────────────────────────────────
A: Sí. Configurar:
   - Stock de esa talla: 0
   - Agregar nota: "Disponible bajo pedido"
   - Habilitar opción "Permitir pedidos sin stock"
   
   El cliente verá:
   [Talla 42 - Sin stock - Bajo pedido]


═══════════════════════════════════════════════════════════════════
  🔧 SOLUCIÓN DE PROBLEMAS COMUNES
═══════════════════════════════════════════════════════════════════

PROBLEMA 1: No aparece el selector de tallas en el producto
────────────────────────────────────────────────────────────────
✓ Verificar que producto tenga "Requiere Talla" = Sí
✓ Verificar que tenga al menos 1 talla configurada en producto_tallas
✓ Verificar que talla tenga estado = 'activo'


PROBLEMA 2: Cliente reporta que no puede agregar al carrito
────────────────────────────────────────────────────────────────
✓ Verificar que haya seleccionado una talla
✓ Verificar stock disponible de esa talla
✓ Revisar consola del navegador (F12) para errores JS


PROBLEMA 3: Stock no se reduce al hacer una venta
────────────────────────────────────────────────────────────────
✓ Verificar que pedido esté en estado "completado"
✓ Revisar logs en: Admin → Sistema → Logs
✓ Verificar función: ProductoTalla::reducirStock()


PROBLEMA 4: Aparece error "Duplicate column name 'talla_id'"
────────────────────────────────────────────────────────────────
✓ El campo ya existe, todo está correcto
✓ No volver a ejecutar la migración


═══════════════════════════════════════════════════════════════════
  📞 SOPORTE Y AYUDA
═══════════════════════════════════════════════════════════════════

Para asistencia adicional:

📧 Email: soporte@tennisyzapatos.com
📱 WhatsApp: +57 300 123 4567
📖 Documentación Completa: docs/SISTEMA_TALLAS.md
🎥 Video Tutorial: [Próximamente]


═══════════════════════════════════════════════════════════════════
  ✅ CHECKLIST DE IMPLEMENTACIÓN
═══════════════════════════════════════════════════════════════════

Para activar el sistema de tallas en un producto nuevo:

[ ] 1. Crear/editar producto en Admin → Productos
[ ] 2. Marcar "Requiere Talla" = Sí
[ ] 3. Guardar producto
[ ] 4. Click en "Gestionar Tallas"
[ ] 5. Seleccionar tallas disponibles
[ ] 6. Ingresar stock por cada talla
[ ] 7. Configurar stock mínimo por talla
[ ] 8. Guardar configuración
[ ] 9. Verificar en tienda que aparezca selector
[ ] 10. Hacer prueba de compra completa

¡Sistema de Tallas activado exitosamente! ✓


═══════════════════════════════════════════════════════════════════

         Guía creada para Tennis y Zapatos E-commerce
                    Versión 1.0 - 2024

═══════════════════════════════════════════════════════════════════
